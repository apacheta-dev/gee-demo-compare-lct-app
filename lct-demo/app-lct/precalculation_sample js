// Import script with layers and reducers configuration app-lct/precalculation.js
var mdlPrecalculation = require('users/apacheta/lct-demo:app-lct/precalculation.js');

var sidsLevel0 = ee.FeatureCollection("projects/apacheta/assets/SIDS/SIDS_GAUL_ADM0"),
    sidsLevel1 = ee.FeatureCollection("projects/apacheta/assets/SIDS/SIDS_GAUL_ADM1");

var version = 'v1'; 

// Modify countryName and iso3 variables accordingly. Alternatively replace ftc0 and ftc1 variables with custom feature collections for boundaries
var countryName = 'Haiti';  // name to filter FAO GAUL collection
var iso3 = 'HTI'; // ISO to use in files and folders names

/* Change output assets folder accordingly */
var assetFolder = 'projects/apacheta-pislm/assets/UNCCD2026_' + iso3 + '/LC/';

var ftc0 = sidsLevel0.filter(ee.Filter.eq('ADM0_NAME', countryName));
var ftc1 = sidsLevel1.filter(ee.Filter.eq('ADM0_NAME', countryName));

// Configuration of collections to run
var sample = [
    { name: 'Precal_Level0', asset: ftc0 },
    { name: 'Precal_Level1', asset: ftc1 },
];


// Calculation and assets exports
sample.forEach(function (s) {
    Export.table.toAsset({
        collection: mdlPrecalculation.precalculate(s.asset),
        description: iso3 + '_LC_' + s.name + '_' + version,
        assetId: assetFolder + iso3 + '_LC_' + s.name + '_' + version,
    });
});
